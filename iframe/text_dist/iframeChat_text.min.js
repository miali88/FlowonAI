!function(){"use strict";function n(n,e,i){return e&&function(n,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,t(o.key),o)}}(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function t(n){var t=function(n,t){if("object"!=typeof n||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n,"string");return"symbol"==typeof t?t:t+""}var e=function(){return n((function n(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.config={agentId:e.agentId||"null",widgetDomain:e.widgetDomain||"/textwidget",iframeDomain:e.iframeDomain||"iframe_domain_not_defined",position:e.position||"right"},this.isExpanded=!1,this.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<=768,window.addEventListener("resize",(function(){t.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<=768})),!document.querySelector('meta[name="viewport"]')){var i=document.createElement("meta");i.name="viewport",i.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(i)}this.iframeLoaded=!1,this.init(),this.setupMessageListener()}),[{key:"init",value:function(){var n=this,t="\n      .text-chat-widget-container {\n        position: fixed;\n        ".concat(this.config.position,": 20px;\n        bottom: 50px;\n        z-index: 9999;\n      }\n\n      .text-chat-widget-container .chat-frame {\n        position: absolute;\n        bottom: 90px;\n        ").concat(this.config.position,": 0;\n        width: 430px;\n        aspect-ratio: 9/16;\n        border-radius: 12px;\n        background: white;\n        border: 1px solid rgba(255, 255, 255, 0.25);\n        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);\n        opacity: 0;\n        visibility: hidden;\n        transition: all 0.3s ease;\n      }\n\n      .text-chat-widget-container.expanded .chat-frame {\n        opacity: 1;\n        visibility: visible;\n      }\n\n      .text-chat-widget-button {\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        background: white;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 12px;\n      }\n\n      .text-chat-widget-icon {\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease;\n      }\n\n      .text-chat-widget-icon.chat {\n        display: block;\n      }\n\n      .text-chat-widget-icon.arrow {\n        display: none;\n        transform: rotate(180deg);\n      }\n\n      .expanded .text-chat-widget-icon.chat {\n        display: none;\n      }\n\n      .expanded .text-chat-widget-icon.arrow {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .text-chat-widget-icon img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n\n      .text-chat-widget-iframe {\n        display: none;\n        width: 100%;\n        height: 100%;\n        border: none;\n        border-radius: 12px;\n        margin: 0;\n        padding: 0;\n      }\n\n      .expanded .text-chat-widget-iframe {\n        display: block;\n        width: 100%;\n        height: 100%;\n        border: none;\n        border-radius: 12px;\n      }\n\n      @media (max-width: 640px) {\n        .text-chat-widget-container.expanded {\n          width: 90%;\n          ").concat(this.config.position,": 10px;\n          bottom: 10px;\n        }\n      }\n\n      /* New Mobile Styles */\n      @media (max-width: 768px), (hover: none) {\n        .text-chat-widget-container {\n          ").concat(this.config.position,": 10px;\n          bottom: calc(20px + env(safe-area-inset-bottom));\n        }\n\n        .text-chat-widget-button {\n          width: 50px;\n          height: 50px;\n          padding: 10px;\n        }\n\n        .text-chat-widget-container.expanded {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          width: 100vw !important;\n          height: 100vh !important;\n          height: 100dvh !important;\n          margin: 0;\n          padding: 0;\n          ").concat(this.config.position,": 0;\n          padding-bottom: env(safe-area-inset-bottom);\n          padding-top: env(safe-area-inset-top);\n          z-index: 2147483647;\n        }\n\n        .text-chat-widget-container.expanded .chat-frame {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          width: 100vw !important;\n          height: 100vh !important;\n          height: 100dvh !important;\n          margin: 0;\n          padding: 0;\n          border: none;\n          border-radius: 0;\n          transform: none;\n          z-index: 2147483647;\n        }\n\n        .text-chat-widget-container.expanded .text-chat-widget-iframe {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw !important;\n          height: 100vh !important;\n          height: 100dvh !important;\n          margin: 0;\n          padding: 0;\n          border: none;\n          border-radius: 0;\n          transform: none;\n          z-index: 2147483647;\n        }\n\n        .text-chat-widget-container .close-button {\n          display: none;\n        }\n\n        .text-chat-widget-container.expanded .close-button {\n          display: none;\n        }\n      }\n\n      /* Base close button styles */\n      .text-chat-widget-close-btn {\n        display: none;  /* Hidden by default */\n        position: fixed;  /* Always fixed position */\n        top: 20px;\n        right: 20px;\n        width: 40px;  /* Slightly larger for better touch target */\n        height: 40px;\n        border-radius: 50%;\n        background: rgba(0, 0, 0, 0.2);\n        border: none;\n        cursor: pointer;\n        align-items: center;\n        justify-content: center;\n        z-index: 2147483647;\n      }\n\n      /* Remove any conflicting mobile styles elsewhere */\n      @media (max-width: 768px), (hover: none) {\n        .text-chat-widget-container.expanded .text-chat-widget-close-btn {\n          display: flex !important;  /* Force display on mobile */\n        }\n\n        /* Ensure iframe is below the close button */\n        .text-chat-widget-container.expanded .chat-frame,\n        .text-chat-widget-container.expanded .text-chat-widget-iframe {\n          z-index: 2147483646;\n        }\n      }\n\n      /* Remove any other close button related styles in other media queries */\n\n      .text-chat-widget-close-btn:hover {\n        background: rgba(0, 0, 0, 0.2);\n      }\n\n      .text-chat-widget-close-btn svg {\n        width: 16px;\n        height: 16px;\n      }\n    ");this.container=document.createElement("div"),this.container.className="text-chat-widget-container collapsed",this.container.innerHTML='\n      <div class="chat-frame">\n        <button class="text-chat-widget-close-btn">\n          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M18 6L6 18M6 6l12 12" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        </button>\n        <iframe \n          class="text-chat-widget-iframe"\n          src="'.concat(this.config.widgetDomain,"/?agentId=").concat(this.config.agentId,'"\n          allow="microphone; camera"\n          sandbox="allow-same-origin allow-scripts allow-forms allow-popups"\n          crossorigin="anonymous"\n        ></iframe>\n      </div>\n      <div class="text-chat-widget-button">\n        <div class="text-chat-widget-icon chat">\n          <img src="').concat(this.config.iframeDomain,'/live-chat.png" alt="Live Chat">\n        </div>\n        <div class="text-chat-widget-icon arrow">\n          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M7 14l5-5 5 5" stroke="#000000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        </div>\n      </div>\n    '),this.container.querySelector(".text-chat-widget-button").addEventListener("click",(function(){return n.toggleWidget()})),this.container.querySelector(".text-chat-widget-close-btn").addEventListener("click",(function(){return n.toggleWidget()}));var e=document.createElement("style");e.textContent=t,document.head.appendChild(e),document.body.appendChild(this.container),this.container.querySelector(".text-chat-widget-iframe").addEventListener("load",(function(){n.iframeLoaded=!0,n.injectIframeStyles()}))}},{key:"toggleWidget",value:function(){this.isExpanded=!this.isExpanded,this.isExpanded?(this.container.classList.remove("collapsed"),this.container.classList.add("expanded"),this.isMobile&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",this.scrollPosition=window.pageYOffset,document.body.style.top="-".concat(this.scrollPosition,"px"))):(this.container.classList.remove("expanded"),this.container.classList.add("collapsed"),this.isMobile&&(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",window.scrollTo(0,this.scrollPosition)))}},{key:"injectIframeStyles",value:function(){var n=this.container.querySelector(".text-chat-widget-iframe"),t="\n      ._chatContainer_1dfai_1 {\n        width: 100% !important;\n        height: 100% !important;\n        max-width: 100% !important;\n        max-height: 100% !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        border: none !important;\n        border-radius: 0 !important;\n      }\n    ";try{var e=document.createElement("style");e.textContent=t,n.contentDocument.head.appendChild(e)}catch(e){n.contentWindow.postMessage({type:"INJECT_STYLES",styles:t},"*")}}},{key:"setupMessageListener",value:function(){var n=this;window.addEventListener("message",(function(t){console.log("Message received:",t.data),"READY_FOR_STYLES"===t.data.type&&n.iframeLoaded&&n.injectIframeStyles()}))}}])}();window.TextChatWidget=e}();
//# sourceMappingURL=iframeChat_text.min.js.map
