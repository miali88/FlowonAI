{"version":3,"file":"iframeChat_text.min.js","sources":["../iframeChat_text.js"],"sourcesContent":["class TextChatWidget {\n  constructor(config = {}) {\n    this.config = {\n      agentId: config.agentId || 'null',\n      widgetDomain: config.widgetDomain || '/textwidget',\n      iframeDomain: config.iframeDomain || 'iframe_domain_not_defined',\n      position: config.position || 'right',\n    };\n    \n    this.isExpanded = false;\n    this.init();\n    this.setupMessageListener();\n  }\n\n  init() {\n    // Updated styles to include both collapsed and expanded states\n    const styles = `\n      .text-chat-widget-container {\n        position: fixed;\n        ${this.config.position}: 20px;\n        bottom: 50px;\n        z-index: 9999;\n      }\n\n      .text-chat-widget-container .chat-frame {\n        position: absolute;\n        bottom: 90px;\n        ${this.config.position}: 0;\n        width: 430px;\n        aspect-ratio: 9/16;\n        border-radius: 12px;\n        background: white;\n        border: 1px solid rgba(255, 255, 255, 0.25);\n        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);\n        opacity: 0;\n        visibility: hidden;\n        transition: opacity 0.3s ease;\n      }\n\n      .text-chat-widget-container.expanded .chat-frame {\n        opacity: 1;\n        visibility: visible;\n      }\n\n      .text-chat-widget-button {\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        background: white;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 12px;\n      }\n\n      .text-chat-widget-icon {\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease;\n      }\n\n      .text-chat-widget-icon.chat {\n        display: block;\n      }\n\n      .text-chat-widget-icon.arrow {\n        display: none;\n        transform: rotate(180deg);\n      }\n\n      .expanded .text-chat-widget-icon.chat {\n        display: none;\n      }\n\n      .expanded .text-chat-widget-icon.arrow {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .text-chat-widget-icon img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n\n      .text-chat-widget-iframe {\n        display: none;\n      }\n\n      .expanded .text-chat-widget-iframe {\n        display: block;\n        width: 100%;\n        height: 100%;\n        border: none;\n        border-radius: 12px;\n      }\n\n      @media (max-width: 640px) {\n        .text-chat-widget-container.expanded {\n          width: 90%;\n          ${this.config.position}: 10px;\n          bottom: 10px;\n        }\n      }\n    `;\n\n    // Create container with initial collapsed state\n    this.container = document.createElement('div');\n    this.container.className = 'text-chat-widget-container collapsed';\n    \n    // Add chat icon and iframe\n    this.container.innerHTML = `\n      <div class=\"chat-frame\">\n        <iframe \n          class=\"text-chat-widget-iframe\"\n          src=\"${this.config.widgetDomain}/?agentId=${this.config.agentId}\"\n          allow=\"microphone; camera\"\n          sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups\"\n          crossorigin=\"anonymous\"\n        ></iframe>\n      </div>\n      <div class=\"text-chat-widget-button\">\n        <div class=\"text-chat-widget-icon chat\">\n          <img src=\"${this.config.iframeDomain}/live-chat.png\" alt=\"Live Chat\">\n        </div>\n        <div class=\"text-chat-widget-icon arrow\">\n          <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M7 14l5-5 5 5\" stroke=\"#000000\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </div>\n      </div>\n    `;\n\n    // Add click handler\n    this.container.addEventListener('click', () => this.toggleWidget());\n\n    // Add styles and container to DOM\n    const styleSheet = document.createElement('style');\n    styleSheet.textContent = styles;\n    document.head.appendChild(styleSheet);\n    document.body.appendChild(this.container);\n  }\n\n  toggleWidget() {\n    this.isExpanded = !this.isExpanded;\n    if (this.isExpanded) {\n      this.container.classList.remove('collapsed');\n      this.container.classList.add('expanded');\n    } else {\n      this.container.classList.remove('expanded');\n      this.container.classList.add('collapsed');\n    }\n  }\n\n  setupMessageListener() {\n    window.addEventListener('message', (event) => {\n      // Keep the message listener as is, but remove the height adjustments\n      // since we're using aspect-ratio now\n      console.log('Message received:', event.data);\n    });\n  }\n}\n\nwindow.TextChatWidget = TextChatWidget;"],"names":["TextChatWidget","_createClass","config","arguments","length","undefined","_classCallCheck","this","agentId","widgetDomain","iframeDomain","position","isExpanded","init","setupMessageListener","key","value","_this","styles","concat","container","document","createElement","className","innerHTML","addEventListener","toggleWidget","styleSheet","textContent","head","appendChild","body","classList","remove","add","window","event","console","log","data"],"mappings":"wkBAAMA,EAAc,WAYjB,OAAAC,GAXD,SAAAD,IAAyB,IAAbE,EAAMC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAE,+FAAAG,MAAAN,GACrBO,KAAKL,OAAS,CACZM,QAASN,EAAOM,SAAW,OAC3BC,aAAcP,EAAOO,cAAgB,cACrCC,aAAcR,EAAOQ,cAAgB,4BACrCC,SAAUT,EAAOS,UAAY,SAG/BJ,KAAKK,YAAa,EAClBL,KAAKM,OACLN,KAAKO,sBACP,GAAC,CAAA,CAAAC,IAAA,OAAAC,MAED,WAAO,IAAAC,EAAAV,KAECW,EAAMC,4EAAAA,OAGNZ,KAAKL,OAAOS,SAAQ,oLAAAQ,OAQpBZ,KAAKL,OAAOS,SAAQQ,wxDAAAA,OA4ElBZ,KAAKL,OAAOS,SAInB,8DAGDJ,KAAKa,UAAYC,SAASC,cAAc,OACxCf,KAAKa,UAAUG,UAAY,uCAG3BhB,KAAKa,UAAUI,UAASL,iHAAAA,OAIXZ,KAAKL,OAAOO,aAAYU,cAAAA,OAAaZ,KAAKL,OAAOM,QAAOW,mTAAAA,OAQnDZ,KAAKL,OAAOQ,aAQ7B,kYAGDH,KAAKa,UAAUK,iBAAiB,SAAS,WAAA,OAAMR,EAAKS,kBAGpD,IAAMC,EAAaN,SAASC,cAAc,SAC1CK,EAAWC,YAAcV,EACzBG,SAASQ,KAAKC,YAAYH,GAC1BN,SAASU,KAAKD,YAAYvB,KAAKa,UACjC,GAAC,CAAAL,IAAA,eAAAC,MAED,WACET,KAAKK,YAAcL,KAAKK,WACpBL,KAAKK,YACPL,KAAKa,UAAUY,UAAUC,OAAO,aAChC1B,KAAKa,UAAUY,UAAUE,IAAI,cAE7B3B,KAAKa,UAAUY,UAAUC,OAAO,YAChC1B,KAAKa,UAAUY,UAAUE,IAAI,aAEjC,GAAC,CAAAnB,IAAA,uBAAAC,MAED,WACEmB,OAAOV,iBAAiB,WAAW,SAACW,GAGlCC,QAAQC,IAAI,oBAAqBF,EAAMG,KACzC,GACF,IAAC,CAnKiB,GAsKpBJ,OAAOnC,eAAiBA"}