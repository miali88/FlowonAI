{"version":3,"file":"iframeChat.min.js","sources":["../iframeChat.js"],"sourcesContent":["class ChatWidget {\n  constructor(config = {}) {\n    this.config = {\n      agentId: config.agentId || 'null',\n      domain: config.domain || 'http://localhost:5173',\n      position: config.position || 'right',\n    };\n    \n    this.init();\n    this.setupMessageListener();\n  }\n\n  init() {\n    // Basic styles\n    const styles = `\n      .chat-widget-container {\n        position: fixed;\n        ${this.config.position}: 20px;\n        bottom: 20px;\n        width: 250px;\n        height: 100px;\n        background: white;\n        border-radius: 16px;\n        display: block;\n        z-index: 9999;\n        border: 1px solid #ccc;\n      }\n\n      .chat-widget-iframe {\n        width: 100%;\n        height: 100%;\n        border: none;\n        border-radius: 16px;\n      }\n\n      @media (max-width: 640px) {\n        .chat-widget-container {\n          width: 80%;\n          max-width: 300px;\n          height: 100px;\n          ${this.config.position}: 10px;\n          bottom: 10px;\n          border-radius: 16px;\n        }\n        \n        .chat-widget-iframe {\n          border-radius: 16px;\n        }\n      }\n    `;\n\n    const styleSheet = document.createElement('style');\n    styleSheet.textContent = styles;\n    document.head.appendChild(styleSheet);\n\n    // Create container\n    this.container = document.createElement('div');\n    this.container.className = 'chat-widget-container';\n\n    // Create iframe\n    this.container.innerHTML = `\n      <iframe \n        class=\"chat-widget-iframe\"\n        src=\"${this.config.domain}?agentId=${this.config.agentId}\"\n        allow=\"microphone; camera\"\n        sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups\"\n        crossorigin=\"anonymous\"\n      ></iframe>\n    `;\n\n    // Add to DOM (only the container)\n    document.body.appendChild(this.container);\n  }\n\n  setupMessageListener() {\n    window.addEventListener('message', (event) => {\n      const expectedDomain = window.location.origin;\n      console.log('Received message:', event.data);\n      console.log('Message origin:', event.origin);\n      console.log('Expected domain:', expectedDomain);\n\n      // TODO: should we check the origin?\n      // if (event.origin !== expectedDomain) {\n      //   console.log('Origin mismatch - message ignored');\n      //   return;\n      // }\n\n      if (event.data.type === 'SHOW_FORM_FIELDS') {\n        console.log('Showing form fields - adjusting height to 400px');\n        this.container.style.height = '400px';\n        this.container.style.width = '350px';\n\n      } else if (event.data.type === 'HIDE_FORM_FIELDS') {\n        console.log('Hiding form fields - adjusting height to 100px');\n        this.container.style.height = '100px';\n        this.container.style.width = '250px';\n      } else {\n        console.log('Message type not recognized:', event.data.type);\n      }\n    });\n  }\n}\n\nwindow.ChatWidget = ChatWidget;"],"names":["ChatWidget","_createClass","config","arguments","length","undefined","_classCallCheck","this","agentId","domain","position","init","setupMessageListener","key","value","styles","concat","styleSheet","document","createElement","textContent","head","appendChild","container","className","innerHTML","body","_this","window","addEventListener","event","expectedDomain","location","origin","console","log","data","type","style","height","width"],"mappings":"wkBAAMA,EAAU,WAUb,OAAAC,GATD,SAAAD,IAAyB,IAAbE,EAAMC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAE,+FAAAG,MAAAN,GACrBO,KAAKL,OAAS,CACZM,QAASN,EAAOM,SAAW,OAC3BC,OAAQP,EAAOO,QAAU,wBACzBC,SAAUR,EAAOQ,UAAY,SAG/BH,KAAKI,OACLJ,KAAKK,sBACP,GAAC,CAAA,CAAAC,IAAA,OAAAC,MAED,WAEE,IAAMC,EAAMC,uEAAAA,OAGNT,KAAKL,OAAOQ,SAAQ,ihBAAAM,OAuBlBT,KAAKL,OAAOQ,SASnB,kLAEKO,EAAaC,SAASC,cAAc,SAC1CF,EAAWG,YAAcL,EACzBG,SAASG,KAAKC,YAAYL,GAG1BV,KAAKgB,UAAYL,SAASC,cAAc,OACxCZ,KAAKgB,UAAUC,UAAY,wBAG3BjB,KAAKgB,UAAUE,gFAAST,OAGbT,KAAKL,OAAOO,OAAM,aAAAO,OAAYT,KAAKL,OAAOM,QAKpD,8KAGDU,SAASQ,KAAKJ,YAAYf,KAAKgB,UACjC,GAAC,CAAAV,IAAA,uBAAAC,MAED,WAAuB,IAAAa,EAAApB,KACrBqB,OAAOC,iBAAiB,WAAW,SAACC,GAClC,IAAMC,EAAiBH,OAAOI,SAASC,OACvCC,QAAQC,IAAI,oBAAqBL,EAAMM,MACvCF,QAAQC,IAAI,kBAAmBL,EAAMG,QACrCC,QAAQC,IAAI,mBAAoBJ,GAQR,qBAApBD,EAAMM,KAAKC,MACbH,QAAQC,IAAI,mDACZR,EAAKJ,UAAUe,MAAMC,OAAS,QAC9BZ,EAAKJ,UAAUe,MAAME,MAAQ,SAEA,qBAApBV,EAAMM,KAAKC,MACpBH,QAAQC,IAAI,kDACZR,EAAKJ,UAAUe,MAAMC,OAAS,QAC9BZ,EAAKJ,UAAUe,MAAME,MAAQ,SAE7BN,QAAQC,IAAI,+BAAgCL,EAAMM,KAAKC,KAE3D,GACF,IAAC,CApGa,GAuGhBT,OAAO5B,WAAaA"}