<script>
	// Get agentId from URL query parameters
	const urlParams = new URLSearchParams(window.location.search);
	const agentId = urlParams.get('agentId');
	
	if (!agentId) {
		document.body.innerHTML = '<p>Error: No agent ID provided. Please include an agentId in the URL parameters.</p>';
	} else {
		window.chatConfig = {
			agentId: agentId,
			widgetDomain: 'http://localhost:5180/textwidget',
			iframeDomain: 'https://03dfb8f6.flowonchatwidget.pages.dev'
		};
		
		document.addEventListener('DOMContentLoaded', function() {
			const scriptEl = document.createElement('script');
			scriptEl.src = "https://03dfb8f6.flowonchatwidget.pages.dev/iframeChat_text.min.js"
			document.body.appendChild(scriptEl);  
			scriptEl.onload = function() {
				new TextChatWidget(window.chatConfig);
			};
		});
	}
</script>